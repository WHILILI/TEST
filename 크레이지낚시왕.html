<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üé£ ÌÅ¨Î†àÏù¥ÏßÄ ÎÇöÏãúÏôï üêü</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Comic Sans MS', cursive, sans-serif;
            background: linear-gradient(180deg, #87CEEB 0%, #4682B4 30%, #20B2AA 70%, #008B8B 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            color: #333;
            padding: 10px;
            padding-bottom: 70px;
            overflow-x: hidden;
            position: relative;
        }

        .clouds {
            position: absolute;
            top: 10%;
            width: 100%;
            height: 20%;
            overflow: hidden;
            z-index: 1;
        }

        .cloud {
            position: absolute;
            background: white;
            border-radius: 50px;
            opacity: 0.8;
            animation: float-clouds 20s infinite linear;
        }

        @keyframes float-clouds {
            0% { transform: translateX(-100px); }
            100% { transform: translateX(calc(100vw + 100px)); }
        }

        .game-container {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(15px);
            border-radius: 25px;
            padding: 20px;
            max-width: 500px;
            width: 100%;
            margin: 0 auto;
            text-align: center;
            border: 3px solid rgba(255, 182, 193, 0.8);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            z-index: 10;
            position: relative;
        }

        h1 {
            font-size: 2em;
            margin-bottom: 15px;
            color: #FF69B4;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }

        .game-info {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-bottom: 15px;
            font-size: 1em;
            font-weight: bold;
        }

        .info-item {
            background: linear-gradient(45deg, #FFE4E1, #F0E68C);
            padding: 8px 12px;
            border-radius: 15px;
            border: 2px solid #FFB6C1;
            color: #FF1493;
        }

        .timing-bar {
            width: 100%;
            height: 20px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 10px;
            margin-bottom: 15px;
            overflow: hidden;
            border: 2px solid #FFB6C1;
        }

        .timing-fill {
            height: 100%;
            background: linear-gradient(90deg, #32CD32 0%, #FFD700 50%, #FF6347 100%);
            transition: width 0.1s linear;
            border-radius: 10px;
        }

        .fishing-area {
            background: linear-gradient(180deg, #E0F6FF 0%, #87CEEB 100%);
            border-radius: 20px;
            padding: 15px;
            margin-bottom: 15px;
            position: relative;
            height: 300px;
            border: 4px solid #4682B4;
            overflow: hidden;
        }

        .fisherman {
            position: absolute;
            top: -20px;
            left: 20px;
            font-size: 3em;
            z-index: 15;
            animation: fisherman-idle 3s ease-in-out infinite;
        }

        @keyframes fisherman-idle {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-3px) rotate(1deg); }
        }

        .fishing-rod {
            position: absolute;
            top: 10px;
            left: 80px;
            width: 100px;
            height: 4px;
            background: #8B4513;
            border-radius: 2px;
            transform: rotate(45deg);
            z-index: 14;
        }

        .fishing-line {
            position: absolute;
            top: 60px;
            left: 150px;
            width: 2px;
            height: 180px;
            background: #333;
            z-index: 13;
            animation: line-sway 2s ease-in-out infinite;
        }

        @keyframes line-sway {
            0%, 100% { transform: translateX(0px); }
            50% { transform: translateX(5px); }
        }

        .hook {
            position: absolute;
            bottom: 5px;
            right: -5px;
            width: 10px;
            height: 10px;
            border: 2px solid #333;
            border-radius: 50% 0 50% 50%;
            transform: rotate(45deg);
        }

        .water-surface {
            position: absolute;
            top: 120px;
            left: 0;
            width: 100%;
            height: 3px;
            background: rgba(255, 255, 255, 0.6);
            animation: water-ripple 2s ease-in-out infinite;
        }

        @keyframes water-ripple {
            0%, 100% { opacity: 0.6; transform: scaleY(1); }
            50% { opacity: 1; transform: scaleY(1.5); }
        }

        .fish {
            position: absolute;
            font-size: 2em;
            z-index: 12;
            cursor: pointer;
            transition: all 0.3s ease;
            animation: swim 3s ease-in-out infinite;
        }

        @keyframes swim {
            0%, 100% { transform: translateX(0px) translateY(0px); }
            33% { transform: translateX(10px) translateY(-5px); }
            66% { transform: translateX(-5px) translateY(5px); }
        }

        .fish:hover {
            transform: scale(1.2);
            filter: brightness(1.2);
        }

        .catch-zone {
            position: absolute;
            bottom: 50px;
            left: 130px;
            width: 40px;
            height: 40px;
            border: 3px dashed #32CD32;
            border-radius: 50%;
            animation: catch-zone-pulse 1s ease-in-out infinite;
            opacity: 0;
        }

        .catch-zone.active {
            opacity: 1;
        }

        @keyframes catch-zone-pulse {
            0%, 100% { transform: scale(1); opacity: 0.7; }
            50% { transform: scale(1.1); opacity: 1; }
        }

        .catch-button {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            border: none;
            background: linear-gradient(135deg, #FF69B4, #FFB6C1);
            color: white;
            font-size: 1.2em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 15px auto;
            border: 4px solid #FF1493;
            box-shadow: 0 4px 15px rgba(255, 105, 180, 0.3);
            font-family: 'Comic Sans MS', cursive, sans-serif;
        }

        .catch-button:hover, .catch-button:active {
            transform: scale(1.1);
            box-shadow: 0 6px 20px rgba(255, 105, 180, 0.5);
        }

        .catch-button:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .buttons {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-bottom: 15px;
        }

        .btn {
            padding: 12px 15px;
            font-size: 1em;
            font-weight: bold;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Comic Sans MS', cursive, sans-serif;
            border: 3px solid;
        }

        .start-btn {
            background: linear-gradient(135deg, #98FB98, #90EE90);
            color: white;
            border-color: #32CD32;
        }

        .start-btn:hover {
            transform: translateY(-2px) scale(1.05);
            box-shadow: 0 4px 15px rgba(50, 205, 50, 0.3);
        }

        .reset-btn {
            background: linear-gradient(135deg, #FFB6C1, #FFA07A);
            color: white;
            border-color: #FF6347;
        }

        .reset-btn:hover {
            transform: translateY(-2px) scale(1.05);
            box-shadow: 0 4px 15px rgba(255, 99, 71, 0.3);
        }

        .message {
            font-size: 1.1em;
            margin-bottom: 15px;
            min-height: 25px;
            font-weight: bold;
            color: #FF1493;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
        }

        .fish-caught {
            position: absolute;
            font-size: 3em;
            animation: fish-jump 2s ease-out;
            pointer-events: none;
            z-index: 20;
        }

        @keyframes fish-jump {
            0% { 
                transform: translateY(100px) scale(0.5);
                opacity: 0;
            }
            50% { 
                transform: translateY(-50px) scale(1.2);
                opacity: 1;
            }
            100% { 
                transform: translateY(-100px) scale(1);
                opacity: 0;
            }
        }

        .combo-display {
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 1.5em;
            font-weight: bold;
            color: #FF69B4;
            background: rgba(255, 255, 255, 0.9);
            padding: 5px 10px;
            border-radius: 15px;
            border: 2px solid #FFB6C1;
            display: none;
        }

        .game-over {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(255, 255, 255, 0.98);
            padding: 30px;
            border-radius: 20px;
            border: 3px solid #FF69B4;
            display: none;
            z-index: 100;
            text-align: center;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        .fish-collection {
            display: flex;
            gap: 5px;
            justify-content: center;
            margin-bottom: 10px;
            flex-wrap: wrap;
            max-height: 60px;
            overflow-y: auto;
        }

        .fish-item {
            font-size: 1.2em;
            background: rgba(255, 182, 193, 0.3);
            padding: 3px 6px;
            border-radius: 8px;
            border: 1px solid #FFB6C1;
        }

        .bubbles {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            pointer-events: none;
        }

        .bubble {
            position: absolute;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            animation: bubble-rise 4s linear infinite;
        }

        @keyframes bubble-rise {
            0% {
                transform: translateY(300px) scale(0);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateY(-50px) scale(1);
                opacity: 0;
            }
        }

        .ad-banner {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            height: 60px;
            background: transparent;
            z-index: 1000;
        }

        @media (max-width: 480px) {
            .game-container {
                padding: 15px;
                margin: 5px;
            }
            
            h1 {
                font-size: 1.7em;
            }
            
            .fishing-area {
                height: 250px;
            }
            
            .fisherman {
                font-size: 2.5em;
            }
            
            .catch-button {
                width: 80px;
                height: 80px;
                font-size: 1em;
            }
        }
    </style>
</head>
<body>
    <div class="clouds">
        <div class="cloud" style="top: 10px; width: 80px; height: 40px; animation-delay: 0s;"></div>
        <div class="cloud" style="top: 30px; width: 60px; height: 30px; animation-delay: 5s;"></div>
        <div class="cloud" style="top: 50px; width: 100px; height: 50px; animation-delay: 10s;"></div>
    </div>

    <div class="game-container">
        <h1>üé£ Í∑ÄÏó¨Ïö¥ ÎÇöÏãúÏôï üêü</h1>
        
        <div class="game-info">
            <div class="info-item">üèÜ Ï†êÏàò: <span id="score">0</span></div>
            <div class="info-item">üêü Î¨ºÍ≥†Í∏∞: <span id="fish-count">0</span></div>
            <div class="info-item">üî• ÏΩ§Î≥¥: <span id="combo">0</span></div>
            <div class="info-item">üìà Î†àÎ≤®: <span id="level">1</span></div>
        </div>

        <div class="timing-bar">
            <div class="timing-fill" id="timing-fill" style="width: 100%;"></div>
        </div>

        <div class="fishing-area" id="fishing-area">
            <div class="bubbles" id="bubbles"></div>
            <div class="fisherman">üßë‚Äçüé£</div>
            <div class="fishing-rod"></div>
            <div class="fishing-line">
                <div class="hook"></div>
            </div>
            <div class="water-surface"></div>
            <div class="catch-zone" id="catch-zone"></div>
            <div class="combo-display" id="combo-display">COMBO x<span id="combo-count">0</span>!</div>
        </div>

        <button class="catch-button" id="catch-button" onclick="tryToCatch()" disabled>üé£<br>Ïû°Í∏∞!</button>

        <div class="message" id="message">üéÆ Í≤åÏûÑÏùÑ ÏãúÏûëÌïòÏó¨ ÎÇöÏãúÎ•º Ï¶êÍ≤®Î≥¥ÏÑ∏Ïöî!</div>

        <div class="fish-collection" id="fish-collection"></div>

        <div class="buttons">
            <button class="btn start-btn" onclick="startGame()">üéÆ Í≤åÏûÑ ÏãúÏûë</button>
            <button class="btn reset-btn" onclick="resetGame()">üîÑ Í≤åÏûÑ Î¶¨ÏÖã</button>
        </div>
    </div>

    <div class="game-over" id="game-over">
        <h2>üéâ Í≤åÏûÑ Ï¢ÖÎ£å!</h2>
        <p>üèÜ ÏµúÏ¢Ö Ï†êÏàò: <span id="final-score">0</span></p>
        <p>üêü Ïû°ÏùÄ Î¨ºÍ≥†Í∏∞: <span id="final-fish">0</span>ÎßàÎ¶¨</p>
        <p>üî• ÏµúÍ≥† ÏΩ§Î≥¥: <span id="final-combo">0</span></p>
        <button class="btn start-btn" onclick="restartGame()" style="margin-top: 15px; width: 100%;">üîÑ Îã§Ïãú ÏãúÏûë</button>
    </div>

    <div class="ad-banner"></div>

    <script>
        let gameActive = false;
        let score = 0;
        let fishCount = 0;
        let combo = 0;
        let maxCombo = 0;
        let level = 1;
        let currentFish = null;
        let fishSpawnTimer = null;
        let catchWindow = false;
        let catchWindowTimer = null;
        let timingTimer = null;
        let timingProgress = 100;

        const fishTypes = [
            { emoji: 'üêü', points: 10, rarity: 0.4 },
            { emoji: 'üê†', points: 15, rarity: 0.3 },
            { emoji: 'üê°', points: 20, rarity: 0.15 },
            { emoji: 'ü¶à', points: 50, rarity: 0.05 },
            { emoji: 'üêô', points: 30, rarity: 0.1 },
            { emoji: 'ü¶ë', points: 25, rarity: 0.12 },
            { emoji: 'ü¶ê', points: 8, rarity: 0.5 },
            { emoji: 'ü¶Ä', points: 12, rarity: 0.35 },
            { emoji: 'üê≥', points: 100, rarity: 0.01 },
            { emoji: 'üêã', points: 80, rarity: 0.02 }
        ];

        function generateBubbles() {
            const bubblesContainer = document.getElementById('bubbles');
            
            setInterval(() => {
                if (gameActive && Math.random() < 0.3) {
                    const bubble = document.createElement('div');
                    bubble.className = 'bubble';
                    bubble.style.left = Math.random() * 100 + '%';
                    bubble.style.width = bubble.style.height = (Math.random() * 15 + 5) + 'px';
                    bubble.style.animationDelay = Math.random() * 2 + 's';
                    bubblesContainer.appendChild(bubble);
                    
                    setTimeout(() => {
                        if (bubble.parentNode) {
                            bubble.parentNode.removeChild(bubble);
                        }
                    }, 4000);
                }
            }, 1000);
        }

        function selectRandomFish() {
            const random = Math.random();
            let cumulativeRarity = 0;
            
            for (let fish of fishTypes) {
                cumulativeRarity += fish.rarity;
                if (random <= cumulativeRarity) {
                    return fish;
                }
            }
            return fishTypes[0];
        }

        function spawnFish() {
            if (!gameActive) return;
            
            removeFish();
            
            const fishType = selectRandomFish();
            const fishElement = document.createElement('div');
            fishElement.className = 'fish';
            fishElement.textContent = fishType.emoji;
            fishElement.onclick = () => tryToCatch();
            
            const fishingArea = document.getElementById('fishing-area');
            const maxX = fishingArea.offsetWidth - 60;
            const maxY = fishingArea.offsetHeight - 180;
            
            fishElement.style.left = (50 + Math.random() * maxX) + 'px';
            fishElement.style.top = (150 + Math.random() * maxY) + 'px';
            
            fishElement.fishData = fishType;
            fishingArea.appendChild(fishElement);
            currentFish = fishElement;
            
            const catchZone = document.getElementById('catch-zone');
            catchZone.classList.add('active');
            
            document.getElementById('catch-button').disabled = false;
            document.getElementById('message').textContent = `${fishType.emoji} Î¨ºÍ≥†Í∏∞ Î∞úÍ≤¨! Îπ†Î•¥Í≤å Ïû°ÏúºÏÑ∏Ïöî!`;
            
            catchWindow = true;
            startCatchTimer();
            
            const fishDuration = Math.max(2000 - level * 100, 800);
            catchWindowTimer = setTimeout(() => {
                missedFish();
            }, fishDuration);
        }

        function startCatchTimer() {
            const duration = Math.max(2000 - level * 100, 800);
            timingProgress = 100;
            
            timingTimer = setInterval(() => {
                timingProgress -= 2;
                document.getElementById('timing-fill').style.width = timingProgress + '%';
                
                if (timingProgress <= 0) {
                    clearInterval(timingTimer);
                }
            }, duration / 50);
        }

        function tryToCatch() {
            if (!gameActive || !catchWindow || !currentFish) return;
            
            clearTimeout(catchWindowTimer);
            clearInterval(timingTimer);
            
            const fishData = currentFish.fishData;
            const timeBonus = Math.floor((timingProgress / 100) * 50);
            const baseScore = fishData.points;
            const comboBonus = combo * 2;
            const levelBonus = level * 5;
            const totalScore = baseScore + timeBonus + comboBonus + levelBonus;
            
            score += totalScore;
            fishCount++;
            combo++;
            maxCombo = Math.max(maxCombo, combo);
            
            showFishCaught(fishData);
            updateDisplay();
            showComboEffect();
            
            if (fishCount % 15 === 0) {
                level++;
                showLevelUp();
            }
            
            removeFish();
            scheduleNextFish();
            
            document.getElementById('message').textContent = `üéâ Ïû°ÏïòÎã§! +${totalScore}Ï†ê! ${fishData.emoji}`;
        }

        function missedFish() {
            if (!gameActive) return;
            
            clearTimeout(catchWindowTimer);
            clearInterval(timingTimer);
            
            combo = 0;
            hideComboEffect();
            removeFish();
            scheduleNextFish();
            
            document.getElementById('message').textContent = 'üòÖ ÎÜìÏ≥§Ïñ¥Ïöî! Îã§Ïùå Í∏∞ÌöåÎ•º ÎÖ∏Î†§Î≥¥ÏÑ∏Ïöî!';
        }

        function removeFish() {
            if (currentFish && currentFish.parentNode) {
                currentFish.parentNode.removeChild(currentFish);
            }
            currentFish = null;
            catchWindow = false;
            
            const catchZone = document.getElementById('catch-zone');
            catchZone.classList.remove('active');
            
            document.getElementById('catch-button').disabled = true;
            document.getElementById('timing-fill').style.width = '100%';
        }

        function scheduleNextFish() {
            if (!gameActive) return;
            
            const spawnDelay = Math.max(3000 - level * 150, 1000) + Math.random() * 2000;
            fishSpawnTimer = setTimeout(() => {
                spawnFish();
            }, spawnDelay);
        }

        function showFishCaught(fishData) {
            const fishElement = document.createElement('div');
            fishElement.className = 'fish-caught';
            fishElement.textContent = fishData.emoji;
            fishElement.style.left = '50%';
            fishElement.style.top = '60%';
            
            document.body.appendChild(fishElement);
            
            setTimeout(() => {
                if (fishElement.parentNode) {
                    fishElement.parentNode.removeChild(fishElement);
                }
            }, 2000);
            
            const fishCollection = document.getElementById('fish-collection');
            const fishItem = document.createElement('div');
            fishItem.className = 'fish-item';
            fishItem.textContent = fishData.emoji;
            fishCollection.appendChild(fishItem);
            
            if (fishCollection.children.length > 20) {
                fishCollection.removeChild(fishCollection.firstChild);
            }
        }

        function showComboEffect() {
            if (combo > 1) {
                const comboDisplay = document.getElementById('combo-display');
                document.getElementById('combo-count').textContent = combo;
                comboDisplay.style.display = 'block';
                comboDisplay.style.animation = 'none';
                comboDisplay.offsetHeight;
                comboDisplay.style.animation = 'bounce 0.5s ease';
            }
        }

        function hideComboEffect() {
            document.getElementById('combo-display').style.display = 'none';
        }

        function showLevelUp() {
            const levelUpElement = document.createElement('div');
            levelUpElement.style.position = 'fixed';
            levelUpElement.style.top = '50%';
            levelUpElement.style.left = '50%';
            levelUpElement.style.transform = 'translate(-50%, -50%)';
            levelUpElement.style.fontSize = '2.5em';
            levelUpElement.style.fontWeight = 'bold';
            levelUpElement.style.color = '#FF69B4';
            levelUpElement.style.textShadow = '2px 2px 4px rgba(0, 0, 0, 0.3)';
            levelUpElement.style.zIndex = '1000';
            levelUpElement.style.animation = 'bounce 1s ease';
            levelUpElement.style.background = 'rgba(255, 255, 255, 0.9)';
            levelUpElement.style.padding = '20px';
            levelUpElement.style.borderRadius = '20px';
            levelUpElement.style.border = '3px solid #FFB6C1';
            levelUpElement.textContent = `üéâ Î†àÎ≤® ${level}! üéâ`;
            
            document.body.appendChild(levelUpElement);
            
            setTimeout(() => {
                if (levelUpElement.parentNode) {
                    levelUpElement.parentNode.removeChild(levelUpElement);
                }
            }, 2000);
        }

        function updateDisplay() {
            document.getElementById('score').textContent = score;
            document.getElementById('fish-count').textContent = fishCount;
            document.getElementById('combo').textContent = combo;
            document.getElementById('level').textContent = level;
        }

        function startGame() {
            if (gameActive) return;
            
            gameActive = true;
            score = 0;
            fishCount = 0;
            combo = 0;
            level = 1;
            
            updateDisplay();
            document.getElementById('fish-collection').innerHTML = '';
            hideComboEffect();
            
            document.getElementById('message').textContent = 'üé£ ÎÇöÏãú ÏãúÏûë! Î¨ºÍ≥†Í∏∞Î•º Í∏∞Îã§Î¶¨Îäî Ï§ë...';
            
            scheduleNextFish();
        }

        function resetGame() {
            gameActive = false;
            
            if (fishSpawnTimer) clearTimeout(fishSpawnTimer);
            if (catchWindowTimer) clearTimeout(catchWindowTimer);
            if (timingTimer) clearInterval(timingTimer);
            
            removeFish();
            
            score = 0;
            fishCount = 0;
            combo = 0;
            maxCombo = 0;
            level = 1;
            
            updateDisplay();
            document.getElementById('fish-collection').innerHTML = '';
            document.getElementById('message').textContent = 'üéÆ Í≤åÏûÑÏùÑ ÏãúÏûëÌïòÏó¨ ÎÇöÏãúÎ•º Ï¶êÍ≤®Î≥¥ÏÑ∏Ïöî!';
            hideComboEffect();
        }

        function endGame() {
            gameActive = false;
            
            if (fishSpawnTimer) clearTimeout(fishSpawnTimer);
            if (catchWindowTimer) clearTimeout(catchWindowTimer);
            if (timingTimer) clearInterval(timingTimer);
            
            removeFish();
            
            document.getElementById('final-score').textContent = score;
            document.getElementById('final-fish').textContent = fishCount;
            document.getElementById('final-combo').textContent = maxCombo;
            document.getElementById('game-over').style.display = 'block';
        }

        function restartGame() {
            document.getElementById('game-over').style.display = 'none';
            resetGame();
            startGame();
        }

        document.addEventListener('keydown', (event) => {
            if (event.key === 'Escape' && gameActive) {
                endGame();
                return;
            }
            
            if (event.key === ' ' || event.key === 'Enter') {
                event.preventDefault();
                tryToCatch();
            }
        });

        generateBubbles();
    </script>
</body>
</html>